import { Button, color, Flex } from "@chakra-ui/react";
import Head from "next/head";
import { useState } from "react";
import PollForm from "../components/PollCard/poll-form";
import PollLayout from "../components/PollCard/poll-layout";
import PollUser from "../components/PollCard/poll-user";
import { AiOutlineArrowLeft } from "react-icons/ai";

export default function Home() {
  const [colorScheme, setColorScheme] = useState("purple");
  const [background, setBackground] = useState(null);
  const [pollSaved, setPollSaved] = useState(false);

  return (
    <>
      <Head>
        <title>Poller</title>
        <meta name='description' content='Generated by create next app' />
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      <Flex
        as={"main"}
        h={"100vh"}
        justifyContent={"center"}
        alignItems={"center"}
        flexDir={"column"}
        gap={5}
        background={`url(${background})`}
        backgroundSize={"cover"}
        backgroundRepeat={"no-repeat"}
      >
        {pollSaved && (
          <Button
            onClick={() => setPollSaved(false)}
            display={"flex"}
            boxShadow={"1px 2px 5px gray"}
            gap={2}
            colorScheme={colorScheme}
          >
            <AiOutlineArrowLeft /> Edit Options
          </Button>
        )}
        <PollLayout pollSaved={pollSaved}>
          {!pollSaved ? (
            <PollForm
              setBackground={(path) => setBackground(path)}
              colorScheme={colorScheme}
              setPollSaved={() => setPollSaved(true)}
            />
          ) : (
            <PollUser
              colorScheme={colorScheme}
              setPollSaved={() => setPollSaved(false)}
            />
          )}
        </PollLayout>
      </Flex>
    </>
  );
}
